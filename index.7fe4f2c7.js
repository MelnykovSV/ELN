!function(){function e(e){return e&&e.__esModule?e.default:e}var t={};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var n={};function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){t&&o(e.prototype,t);n&&o(e,n);return e};var a={};Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e};var l=function n(){"use strict";e(t)(this,n),this.fractionGlobalID=n.fractionGlobalID+=1,this.mass=null,this.purity=null,this.isNMR=!1,this.isLCMS=!1,this.comment=!1};e(a)(l,"fractionGlobalID",0);var r=function(){"use strict";function o(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.mw,l=void 0===a?null:a,r=n.dbID,c=void 0===r?null:r,i=n.smiles,d=void 0===i?null:i,s=n.isTestSuccessful,u=void 0!==s&&s,m=n.isScalingSuccessful,f=void 0!==m&&m,v=n.fractions,b=void 0===v?[]:v,p=arguments.length>1?arguments[1]:void 0;e(t)(this,o),this.compoundGlobalID=p,this.mw=l,this.smiles=d,this.isTestSuccessful=u,this.isScalingSuccessful=f,this.fractions=b,this.dbID=c}return e(n)(o,[{key:"addFraction",value:function(){this.fractions.push(new l)}}]),o}();function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.compoundGlobalID,n=e.mw,o=void 0===n?"":n,a=e.smiles,l=void 0===a?"":a,r=e.isTestSuccessful,c=e.isScalingSuccessful,i=e.dbID,d=void 0===i?"":i,s=(e.fractions,arguments.length>1?arguments[1]:void 0),u=arguments.length>2?arguments[2]:void 0,m=document.querySelector("[data-schemeid='".concat(s,"']")),f='<form action="#" class="compound-form" data-id=\''.concat(t,'\' data-schemeID=\'\'>\n    <div class="compound-form__body">\n      <div class="compound-form__upper-part">\n        <div class="compound-form-canvas-container">\n          <canvas id="canvas').concat(t,'"></canvas>\n        </div>\n        <div class="compound-form__compound-data">\n          <label class="">\n            ID\n            <input type="text" name="dbID" value="').concat(d,'" />\n          </label>\n          <label class="">\n            MW\n            <input class=\'compound-form__mw-input\' type="text" name="mw" value="').concat(o,'" />\n          </label>\n          <label>\n            <input type="checkbox" id="" name="isTestSuccessful" ').concat(!0===r?"checked":"",' />\n            Test\n          </label>\n          <label>\n            <input type="checkbox" id="" name="isScalingSuccessful" ').concat(!0===c?"checked":"",' />\n            Scaling\n          </label>\n        </div>\n      </div>\n      <div class="compound-form__lower-part">\n        <label class="text-input-label">\n          SMILES\n          <input type="text" name="smiles" value="').concat(l,'" />\n        </label>\n        <div class="compound-from__button-block">\n          <button type="submit">Add task</button>\n          <button type="submit" name=\'addCompound\' ').concat("last"!==u?"disabled":"",'>Add compund</button>\n          <label>\n            Fractions\n            <input type="checkbox" name="" id="" />\n          </label>\n        </div>\n      </div>\n    </div>\n    <div class="compound-form__fractions">\n      <div class="compound-form__fractions-main">\n        <label>\n          Fractions\n          <select name="" id="">\n            <option value="">Fraction 1</option>\n            <option value="">Fraction 2</option>\n          </select>\n        </label>\n        <button type="submit">Add fraction</button>\n      </div>\n      <div class="compound-form__single-fraction">\n        <div class="compound-form__single-fraction-upper-part">\n          <div class="compound-form__single-fraction-characteristics">\n            <label class="">\n              Mass\n              <input type="text" />\n            </label>\n            <label class="">\n              Purity\n              <input type="text" />\n            </label>\n          </div>\n          <div class="compound-form__single-fraction-spectra">\n            <label>\n              <input type="checkbox" name="" id="" />\n              NMR\n            </label>\n            <label>\n              <input type="checkbox" name="" id="" />\n              LCMS\n            </label>\n          </div>\n        </div>\n        <div class="compound-form__single-fraction-lower-part">\n          <label class="">\n            Comments\n            <textarea name="" id="" cols="30" rows="3"></textarea>\n          </label>\n        </div>\n      </div>\n    </div>\n  </form>');m.insertAdjacentHTML("beforeend",f)}e(a)(r,"compoundGlobalID",0);var i=function(){"use strict";function o(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.globalSchemeID,l=void 0===a?o.globalSchemeID+=1:a,r=n.body,c=void 0===r?[]:r;e(t)(this,o),this.globalSchemeID=l,this.body=c}return e(n)(o,[{key:"addCompound",value:function(e){this.body.push(new r({},e))}}]),o}();e(a)(i,"globalSchemeID",0);var d=function(){"use strict";function o(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=n.body,r=void 0===l?[]:l;e(t)(this,o),e(a)(this,"body",void 0),this.body=r}return e(n)(o,[{key:"addScheme",value:function(e){this.body.push(new i({},e))}}]),o}();var s=function(e){var t=p.body[e].globalSchemeID;m.insertAdjacentHTML("beforeend",'<div class="scheme" data-schemeID=\''.concat(t,"'></div>"));var n=p.body[e].body.sort((function(e,t){e.compoundGlobalID,t.compoundGlobalID})),o=!0,a=!1,l=void 0;try{for(var r,i=function(e,o){var a=o.value;if(a===n[n.length-1])c(a,t,"last");else c(a,t);SmilesDrawer.parse(a.smiles,(function(e){b.draw(e,"canvas".concat(a.compoundGlobalID),"light",!1)}))},d=n[Symbol.iterator]();!(o=(r=d.next()).done);o=!0)i(0,r)}catch(e){a=!0,l=e}finally{try{o||null==d.return||d.return()}finally{if(a)throw l}}},u=(document.querySelector(".page-button"),document.querySelector(".scheme-button")),m=document.querySelector(".sheet"),f=parseInt(localStorage.getItem("globalCompoundID"))||0,v=parseInt(localStorage.getItem("globalSchemeID"))||0,b=new SmilesDrawer.Drawer({width:150,height:150}),p=function(){if(!localStorage.getItem("pageBody"))return null;var e=new d,t=JSON.parse(localStorage.getItem("pageBody")),n=!0,o=!1,a=void 0;try{for(var c,s=t.body[Symbol.iterator]();!(n=(c=s.next()).done);n=!0){schemeData=c.value;var u=new i;e.body.push(u);var m=!0,f=!1,v=void 0;try{for(var b,p=schemeData.body[Symbol.iterator]();!(m=(b=p.next()).done);m=!0){compoundData=b.value;var g=new r(compoundData,compoundData.compoundGlobalID);u.body.push(g);var h=!0,y=!1,S=void 0;try{for(var I,D=compoundData.fractions[Symbol.iterator]();!(h=(I=D.next()).done);h=!0){fractionData=I.value;var w=new l;g.fractions.push(w)}}catch(e){y=!0,S=e}finally{try{h||null==D.return||D.return()}finally{if(y)throw S}}}}catch(e){f=!0,v=e}finally{try{m||null==p.return||p.return()}finally{if(f)throw v}}}}catch(e){o=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return e}();if(null===p&&(p=new d),0!==p.body.length)for(var g=0;g<p.body.length;g+=1)s(g);else console.log("local storage is empty");var h=document.querySelectorAll(".scheme"),y=!0,S=!1,I=void 0;try{for(var D,w=function(e,t){var n=t.value;n.addEventListener("click",(function(e){var t=e.currentTarget.dataset.schemeid;"addCompound"===e.target.name&&(e.preventDefault(),f+=1,e.target.disabled=!0,localStorage.setItem("globalCompoundID",f),p.body[t-1].addCompound(f),c(p.body[t-1].body[p.body[t-1].body.length-1],e.currentTarget.dataset.schemeid,"last"),n.lastChild&&(n.lastChild.addEventListener("input",(function(e){O(e,t)})),n.lastChild.addEventListener("change",(function(e){M(e,t)})),localStorage.setItem("pageBody",JSON.stringify(p))))}))},_=h[Symbol.iterator]();!(y=(D=_.next()).done);y=!0)w(0,D)}catch(e){S=!0,I=e}finally{try{y||null==_.return||_.return()}finally{if(S)throw I}}u.addEventListener("click",(function(){console.log("scheme id before adding: "+v);var e=v+=1;console.log("scheme id after adding: "+e),localStorage.setItem("globalSchemeID",e),p.addScheme(e),m.insertAdjacentHTML("beforeend",'<div class="scheme" data-schemeID=\''.concat(e,"'></div>"));var t=f+=1;localStorage.setItem("globalCompoundID",f),console.log(p.body[e-1]),p.body[e-1].addCompound(t),c(p.body[e-1].body[0],e,"last"),console.log("added new scheme with id ".concat(e," with a new form(id: ").concat(t,")"));var n=document.querySelector(".sheet").lastChild;n.lastChild;console.log("currentSchemeID!!!!!"+e),console.log(n),console.log(n.lastChild),n.addEventListener("click",(function(e){var t=e.currentTarget.dataset.schemeid;console.log(n),"addCompound"===e.target.name&&(e.preventDefault(),f+=1,e.target.disabled=!0,localStorage.setItem("globalCompoundID",f),p.body[t-1].addCompound(f),c(p.body[t-1].body[p.body[t-1].body.length-1],e.currentTarget.dataset.schemeid,"last"),console.log(n),console.log(n.lastChild),n.lastChild&&(n.lastChild.addEventListener("input",(function(e){O(e,t)})),n.lastChild.addEventListener("change",(function(e){M(e,t)})),localStorage.setItem("pageBody",JSON.stringify(p))))})),n.lastChild?(n.lastChild.addEventListener("input",(function(t){O(t,e)})),n.lastChild.addEventListener("change",(function(t){M(t,e)})),localStorage.setItem("pageBody",JSON.stringify(p))):alert("UNKNOWN ERROR OCCURED!!! PLEASE RELOAD THE PAGE"),localStorage.setItem("pageBody",JSON.stringify(p))}));var C=document.querySelectorAll("[data-id]");console.log(C);var x=!0,E=!1,N=void 0;try{for(var T,L=function(e,t){var n=t.value;n.addEventListener("input",(function(e){console.log(n.parentNode.dataset.schemeid),console.log(n),O(e,n.parentNode.dataset.schemeid)})),n.addEventListener("change",(function(e){M(e,n.parentNode.dataset.schemeid)}))},k=C[Symbol.iterator]();!(x=(T=k.next()).done);x=!0)L(0,T)}catch(e){E=!0,N=e}finally{try{x||null==k.return||k.return()}finally{if(E)throw N}}function O(e,t){if(console.log("this:"+t),"INPUT"===e.target.nodeName&&"text"===e.target.type){var n=p.body[t-1].body.find((function(t){return t.compoundGlobalID===parseInt(e.currentTarget.dataset.id)}));if(console.log(p.body[t-1].body),n[e.target.name]=e.target.value,localStorage.setItem("pageBody",JSON.stringify(p)),"smiles"===e.target.name){var o=e.currentTarget.querySelector(".compound-form__mw-input");SmilesDrawer.parse(e.target.value,(function(t){b.draw(t,"canvas".concat(e.currentTarget.dataset.id),"light",!1)})),SmilesDrawer.parse(e.target.value,(function(e){var t=b.getMolecularFormula(e);o.value=calc(t).mass,n.mw=calc(t).mass,localStorage.setItem("pageBody",JSON.stringify(p))}))}}}function M(e,t){(console.log("this:"+t),"INPUT"===e.target.nodeName&&"checkbox"===e.target.type)&&(p.body[t-1].body.find((function(t){return t.compoundGlobalID===parseInt(e.currentTarget.dataset.id)}))[e.target.name]=e.target.checked,localStorage.setItem("pageBody",JSON.stringify(p)))}console.log(p)}();
//# sourceMappingURL=index.7fe4f2c7.js.map
