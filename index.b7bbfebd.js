function e(e){return e&&e.__esModule?e.default:e}var n={};Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e};class t{constructor(){this.fractionGlobalID=t.fractionGlobalID+=1,this.mass=null,this.purity=null,this.isNMR=!1,this.isLCMS=!1,this.comment=!1}}e(n)(t,"fractionGlobalID",0);class o{addFraction(){this.fractions.push(new t)}constructor({mw:e=null,dbID:n=null,smiles:t=null,isTestSuccessful:o=!1,isScalingSuccessful:a=!1,fractions:l=[]}={},s){this.compoundGlobalID=s,this.mw=e,this.smiles=t,this.isTestSuccessful=o,this.isScalingSuccessful=a,this.fractions=l,this.dbID=n}}function a({compoundGlobalID:e,mw:n="",smiles:t="",isTestSuccessful:o,isScalingSuccessful:a,dbID:l="",fractions:s}={}){const c=`<form action="#" class="compound-form" data-id = '${e}'>\n    <div class="compound-form__body">\n      <div class="compound-form__upper-part">\n        <div class="compound-form-canvas-container">\n          <canvas id="canvas${e}"></canvas>\n        </div>\n        <div class="compound-form__compound-data">\n          <label class="">\n            ID\n            <input type="text" name="dbID" value="${l}" />\n          </label>\n          <label class="">\n            MW\n            <input type="text" name="mw" value="${n}" />\n          </label>\n          <label>\n            <input type="checkbox" id="" name="isTestSuccessful" ${!0===o?"checked":""} />\n            Test\n          </label>\n          <label>\n            <input type="checkbox" id="" name="isScalingSuccessful" ${!0===a?"checked":""} />\n            Scaling\n          </label>\n        </div>\n      </div>\n      <div class="compound-form__lower-part">\n        <label class="text-input-label">\n          SMILES\n          <input type="text" name="smiles" value="${t}" />\n        </label>\n        <div class="compound-from__button-block">\n          <button type="submit">Add task</button>\n          <button type="submit">Add compund</button>\n          <label>\n            Fractions\n            <input type="checkbox" name="" id="" />\n          </label>\n        </div>\n      </div>\n    </div>\n    <div class="compound-form__fractions">\n      <div class="compound-form__fractions-main">\n        <label>\n          Fractions\n          <select name="" id="">\n            <option value="">Fraction 1</option>\n            <option value="">Fraction 2</option>\n          </select>\n        </label>\n        <button type="submit">Add fraction</button>\n      </div>\n      <div class="compound-form__single-fraction">\n        <div class="compound-form__single-fraction-upper-part">\n          <div class="compound-form__single-fraction-characteristics">\n            <label class="">\n              Mass\n              <input type="text" />\n            </label>\n            <label class="">\n              Purity\n              <input type="text" />\n            </label>\n          </div>\n          <div class="compound-form__single-fraction-spectra">\n            <label>\n              <input type="checkbox" name="" id="" />\n              NMR\n            </label>\n            <label>\n              <input type="checkbox" name="" id="" />\n              LCMS\n            </label>\n          </div>\n        </div>\n        <div class="compound-form__single-fraction-lower-part">\n          <label class="">\n            Comments\n            <textarea name="" id="" cols="30" rows="3"></textarea>\n          </label>\n        </div>\n      </div>\n    </div>\n  </form>`;document.querySelector(".main-page").insertAdjacentHTML("beforeend",c)}e(n)(o,"compoundGlobalID",0);class l{addCompound(e){this.body.push(new o({},e))}constructor({schemeGlobalID:e=(l.schemeGlobalID+=1),body:n=[]}={}){this.schemeGlobalID=e,this.body=n}}e(n)(l,"schemeGlobalID",0);class s{constructor({body:t=[]}={}){e(n)(this,"body",void 0),this.body=t}}document.querySelector(".page-button"),document.querySelector(".scheme-button");const c=document.querySelector(".compound-button"),i=document.querySelector(".main-page");document.querySelector(".main-canvas"),document.querySelector(".main-input");let d=parseInt(localStorage.getItem("globalCompoundID"))||0,r=new SmilesDrawer.Drawer({width:150,height:150});c.addEventListener("click",(()=>{d+=1,localStorage.setItem("globalCompoundID",d),u.body[0].addCompound(d),a(u.body[0].body[u.body[0].body.length-1]),i.lastChild.addEventListener("input",(e=>{if("INPUT"===e.target.nodeName){u.body[0].body.find((n=>n.compoundGlobalID===parseInt(e.currentTarget.dataset.id)))[e.target.name]=e.target.value,localStorage.setItem("pageBody",JSON.stringify(u)),"smiles"===e.target.name&&SmilesDrawer.parse(e.target.value,(function(n){r.draw(n,`canvas${e.currentTarget.dataset.id}`,"light",!1)}))}i.lastChild.addEventListener("change",p)})),localStorage.setItem("pageBody",JSON.stringify(u))}));let u=function(){if(!localStorage.getItem("pageBody"))return null;const e=new s,n=JSON.parse(localStorage.getItem("pageBody"));for(schemeData of n.body){const n=new l;for(compoundData of(e.body.push(n),schemeData.body)){const e=new o(compoundData,compoundData.compoundGlobalID);for(fractionData of(n.body.push(e),compoundData.fractions)){const n=new t;e.fractions.push(n)}}}return e}();if(null===u&&(u=new s),0!==u.body.length){const e=u.body[0].body.sort(((e,n)=>{e.compoundGlobalID,n.compoundGlobalID}));for(const n of e){a(n);document.querySelector(`#canvas${n.compoundGlobalID}`);SmilesDrawer.parse(n.smiles,(function(e){r.draw(e,`canvas${n.compoundGlobalID}`,"light",!1)}))}}else console.log("local storage is empty"),u.body.push(new l);const m=document.querySelectorAll("[data-id]");for(item of m)item.addEventListener("input",(e=>{if("INPUT"===e.target.nodeName&&"text"===e.target.type){u.body[0].body.find((n=>n.compoundGlobalID===parseInt(e.currentTarget.dataset.id)))[e.target.name]=e.target.value,localStorage.setItem("pageBody",JSON.stringify(u)),"smiles"===e.target.name&&SmilesDrawer.parse(e.target.value,(function(n){r.draw(n,`canvas${e.currentTarget.dataset.id}`,"light",!1)}))}})),item.addEventListener("change",p);function p(e){if("INPUT"===e.target.nodeName&&"checkbox"===e.target.type){u.body[0].body.find((n=>n.compoundGlobalID===parseInt(e.currentTarget.dataset.id)))[e.target.name]=e.target.checked,localStorage.setItem("pageBody",JSON.stringify(u))}}
//# sourceMappingURL=index.b7bbfebd.js.map
